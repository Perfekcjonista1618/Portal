<html>
@model PortalDataPresentation.ViewModels.LineChartVM

@{
    ViewData["Title"] = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<br />
<br />
<body>
    <h2>Measurements for @Model.Data.First().DataTypeKeyName</h2>

    <div class="col-md-6; col-lg-12">
        @await Html.PartialAsync("RefreshTable", Model.Data)
    </div>
    <div class="col-md-6; col-lg-12">
        @await Html.PartialAsync("LineChart", Model)
    </div>

    @*<input type="button" value="Analyze" onclick="@("window.location.href='" + @Url.Action("Analyze", "MeasurementDatas", Model) + "'");" />*@
    <p>
        <label>Wynik: </label>
        <label id="lblResult"></label>
    </p>
    <button type="button" id="btnAnalyze" class="btn btn-primary">Average</button>

</body>
</html>
 @*document.getElementById('lblResult').innerHTML = 'your tip has been submitted!';*@
<script type="text/javascript">
    var p = document.getElementById("btnAnalyze");
    var r = document.getElementById("lblResult");

    p.onclick = passDataToAnalysis;
    function passDataToAnalysis() {
        $.ajax({
            type: 'POST',
            contentType: 'application/json; charset=utf-8',
            url: '@Url.Action("Analyze", "AnalysisComputation", new {operation = "Average"})',
            dataType: 'JSON',
            data: JSON.stringify(@Json.Serialize(Model.Data)),
            success: function (result) {
                r.innerHTML = result.result;
            },
            error: function(e) {
                alert(e);
            }
        });
    }
</script>